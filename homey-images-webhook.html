<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homey Image Display</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
            transition: opacity 0.5s ease-in-out;
        }
        
        .hidden {
            display: none;
        }
        
        /* Loading indicator */
        .loading {
            color: #fff;
            font-family: Arial, sans-serif;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">Načítání...</div>
    <img id="image1" class="hidden" alt="Obrázek 1">
    <img id="image2" class="hidden" alt="Obrázek 2">
    
    <script>
        // Cesty k obrázkům (relativní cesty - obrázky jsou ve stejné složce jako HTML)
        const images = {
            '1': './image1.jpg',
            '2': './image2.jpg'
        };
        
        // POZNÁMKA: Pokud máte obrázky s jiným názvem nebo příponou (.png, .gif),
        // změňte názvy výše. Například:
        // '1': './zimni-krajina.png',
        // '2': './letni-plaz.jpg'
        
        let currentImage = '1';
        
        // Načtení aktuálního stavu ze souboru state.txt
        async function loadState() {
            try {
                // Přidáme timestamp, aby se vyhlo cachování
                const timestamp = new Date().getTime();
                const response = await fetch(`./state.txt?t=${timestamp}`);
                
                if (response.ok) {
                    const text = await response.text();
                    const newImage = text.trim();
                    
                    // Pouze pokud se změnil stav
                    if (newImage !== currentImage && images[newImage]) {
                        currentImage = newImage;
                        displayImage();
                    }
                } else {
                    console.error('Chyba při načítání state.txt:', response.status);
                }
            } catch (error) {
                console.error('Chyba při načítání stavu:', error);
            }
        }
        
        // Zobrazení správného obrázku
        function displayImage() {
            const img1 = document.getElementById('image1');
            const img2 = document.getElementById('image2');
            const loading = document.getElementById('loading');
            
            // Skrýt loading indikátor
            loading.classList.add('hidden');
            
            // Nastavení zdrojů obrázků
            img1.src = images['1'];
            img2.src = images['2'];
            
            // Zobrazení správného obrázku
            if (currentImage === '1') {
                img1.classList.remove('hidden');
                img2.classList.add('hidden');
            } else if (currentImage === '2') {
                img1.classList.add('hidden');
                img2.classList.remove('hidden');
            }
            
            console.log('Zobrazen obrázek:', currentImage);
        }
        
        // Inicializace při načtení stránky
        async function init() {
            await loadState();
            displayImage();
            
            // Kontrola stavu každých 10 sekund
            setInterval(loadState, 10000);
        }
        
        // Spuštění
        init();
    </script>
</body>
</html>
